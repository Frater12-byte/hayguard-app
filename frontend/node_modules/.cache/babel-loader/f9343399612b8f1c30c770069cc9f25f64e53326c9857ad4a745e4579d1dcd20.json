{"ast":null,"code":"import React,{useState,useEffect}from'react';import{BrowserRouter as Router,Routes,Route,Navigate}from'react-router-dom';import'./App.css';// Components\nimport Login from'./components/Auth/Login';import Dashboard from'./components/Dashboard';import SensorManagement from'./components/Sensors/SensorManagement';import Reports from'./components/Reports/Reports';import Team from'./components/Team/Team';import Alerts from'./components/Alerts/Alerts';import Profile from'./components/Profile/Profile';import Settings from'./components/Settings/Settings';import MyFarm from'./components/Farm/MyFarm';import Farms from'./components/Farms/Farms';import FarmDetails from'./components/Farms/FarmDetails';import Weather from'./components/Weather/Weather';import Analytics from'./components/Analytics/Analytics';import Sidebar from'./components/Sidebar';import Header from'./components/Header';// Services\nimport{authService}from'./services/authService';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[isAuthenticated,setIsAuthenticated]=useState(false);const[loading,setLoading]=useState(true);const[sidebarCollapsed,setSidebarCollapsed]=useState(false);useEffect(()=>{const checkAuth=async()=>{try{const token=localStorage.getItem('token');if(token){setIsAuthenticated(true);}}catch(error){console.error('Auth check failed:',error);}finally{setLoading(false);}};checkAuth();},[]);const handleLogout=()=>{localStorage.removeItem('token');setIsAuthenticated(false);};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading...\"});}return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",element:isAuthenticated?/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\",replace:true}):/*#__PURE__*/_jsx(Login,{setIsAuthenticated:setIsAuthenticated})}),/*#__PURE__*/_jsx(Route,{path:\"/\",element:isAuthenticated?/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\",replace:true}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"/*\",element:isAuthenticated?/*#__PURE__*/_jsxs(\"div\",{className:\"app-layout\",children:[/*#__PURE__*/_jsx(Sidebar,{collapsed:sidebarCollapsed,onToggle:()=>setSidebarCollapsed(!sidebarCollapsed)}),/*#__PURE__*/_jsxs(\"div\",{className:\"main-content\",children:[/*#__PURE__*/_jsx(Header,{onLogout:handleLogout}),/*#__PURE__*/_jsx(\"div\",{className:\"content\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/dashboard\",element:/*#__PURE__*/_jsx(Dashboard,{})}),/*#__PURE__*/_jsx(Route,{path:\"/sensors\",element:/*#__PURE__*/_jsx(SensorManagement,{})}),/*#__PURE__*/_jsx(Route,{path:\"/reports\",element:/*#__PURE__*/_jsx(Reports,{})}),/*#__PURE__*/_jsx(Route,{path:\"/team\",element:/*#__PURE__*/_jsx(Team,{})}),/*#__PURE__*/_jsx(Route,{path:\"/alerts\",element:/*#__PURE__*/_jsx(Alerts,{})}),/*#__PURE__*/_jsx(Route,{path:\"/profile\",element:/*#__PURE__*/_jsx(Profile,{})}),/*#__PURE__*/_jsx(Route,{path:\"/settings\",element:/*#__PURE__*/_jsx(Settings,{})}),/*#__PURE__*/_jsx(Route,{path:\"/farm-info\",element:/*#__PURE__*/_jsx(MyFarm,{})}),/*#__PURE__*/_jsx(Route,{path:\"/farms\",element:/*#__PURE__*/_jsx(Farms,{})}),/*#__PURE__*/_jsx(Route,{path:\"/farms/:id\",element:/*#__PURE__*/_jsx(FarmDetails,{})}),/*#__PURE__*/_jsx(Route,{path:\"/weather\",element:/*#__PURE__*/_jsx(Weather,{})}),/*#__PURE__*/_jsx(Route,{path:\"/analytics\",element:/*#__PURE__*/_jsx(Analytics,{})})]})})]})]}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true})})]})})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Routes","Route","Navigate","Login","Dashboard","SensorManagement","Reports","Team","Alerts","Profile","Settings","MyFarm","Farms","FarmDetails","Weather","Analytics","Sidebar","Header","authService","jsx","_jsx","jsxs","_jsxs","App","isAuthenticated","setIsAuthenticated","loading","setLoading","sidebarCollapsed","setSidebarCollapsed","checkAuth","token","localStorage","getItem","error","console","handleLogout","removeItem","className","children","path","element","to","replace","collapsed","onToggle","onLogout"],"sources":["/Users/francescoterragni/Desktop/hayguard/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\nimport './App.css';\n\n// Components\nimport Login from './components/Auth/Login';\nimport Dashboard from './components/Dashboard';\nimport SensorManagement from './components/Sensors/SensorManagement';\nimport Reports from './components/Reports/Reports';\nimport Team from './components/Team/Team';\nimport Alerts from './components/Alerts/Alerts';\nimport Profile from './components/Profile/Profile';\nimport Settings from './components/Settings/Settings';\nimport MyFarm from './components/Farm/MyFarm';\nimport Farms from './components/Farms/Farms';\nimport FarmDetails from './components/Farms/FarmDetails';\nimport Weather from './components/Weather/Weather';\nimport Analytics from './components/Analytics/Analytics';\nimport Sidebar from './components/Sidebar';\nimport Header from './components/Header';\n\n// Services\nimport { authService } from './services/authService';\n\nfunction App() {\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\n\n  useEffect(() => {\n    const checkAuth = async () => {\n      try {\n        const token = localStorage.getItem('token');\n        if (token) {\n          setIsAuthenticated(true);\n        }\n      } catch (error) {\n        console.error('Auth check failed:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    checkAuth();\n  }, []);\n\n  const handleLogout = () => {\n    localStorage.removeItem('token');\n    setIsAuthenticated(false);\n  };\n\n  if (loading) {\n    return <div className=\"loading\">Loading...</div>;\n  }\n\n  return (\n    <Router>\n      <div className=\"App\">\n        <Routes>\n          <Route \n            path=\"/login\" \n            element={\n              isAuthenticated ? \n              <Navigate to=\"/dashboard\" replace /> : \n              <Login setIsAuthenticated={setIsAuthenticated} />\n            } \n          />\n          <Route \n            path=\"/\" \n            element={\n              isAuthenticated ? \n              <Navigate to=\"/dashboard\" replace /> : \n              <Navigate to=\"/login\" replace />\n            } \n          />\n          \n          {/* Protected Routes with Layout */}\n          <Route path=\"/*\" element={\n            isAuthenticated ? (\n              <div className=\"app-layout\">\n                <Sidebar \n                  collapsed={sidebarCollapsed} \n                  onToggle={() => setSidebarCollapsed(!sidebarCollapsed)}\n                />\n                <div className=\"main-content\">\n                  <Header onLogout={handleLogout} />\n                  <div className=\"content\">\n                    <Routes>\n                      <Route path=\"/dashboard\" element={<Dashboard />} />\n                      <Route path=\"/sensors\" element={<SensorManagement />} />\n                      <Route path=\"/reports\" element={<Reports />} />\n                      <Route path=\"/team\" element={<Team />} />\n                      <Route path=\"/alerts\" element={<Alerts />} />\n                      <Route path=\"/profile\" element={<Profile />} />\n                      <Route path=\"/settings\" element={<Settings />} />\n                      <Route path=\"/farm-info\" element={<MyFarm />} />\n                      <Route path=\"/farms\" element={<Farms />} />\n                      <Route path=\"/farms/:id\" element={<FarmDetails />} />\n                      <Route path=\"/weather\" element={<Weather />} />\n                      <Route path=\"/analytics\" element={<Analytics />} />\n                    </Routes>\n                  </div>\n                </div>\n              </div>\n            ) : (\n              <Navigate to=\"/login\" replace />\n            )\n          } />\n        </Routes>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}