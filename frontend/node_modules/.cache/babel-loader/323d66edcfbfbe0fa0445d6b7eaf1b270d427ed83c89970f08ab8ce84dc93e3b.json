{"ast":null,"code":"import _objectSpread from\"/Users/francescoterragni/Desktop/hayguard/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{BrowserRouter as Router,Routes,Route,Navigate}from'react-router-dom';import'./App.css';// Components\nimport Sidebar from'./components/Sidebar';import Header from'./components/Header';import Dashboard from'./components/Dashboard';import MyFarm from'./components/Farm/MyFarm';import SensorManagement from'./components/Sensors/SensorManagement';import Farms from'./components/Farms/Farms';import FarmDetails from'./components/Farms/FarmDetails';import Reports from'./components/Reports/Reports';import Team from'./components/Team/Team';import Alerts from'./components/Alerts/Alerts';import Login from'./components/Auth/Login';import Profile from'./components/Profile/Profile';// Services\nimport{authService}from'./services/authService';import{userService}from'./services/userService';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);const[sidebarCollapsed,setSidebarCollapsed]=useState(false);useEffect(()=>{const initializeAuth=async()=>{try{const token=localStorage.getItem('token');if(token){const userData=await userService.getCurrentUser();setUser(userData);}}catch(error){console.error('Auth initialization failed:',error);localStorage.removeItem('token');}finally{setLoading(false);}};initializeAuth();},[]);const handleLogin=async(email,password)=>{try{if(email==='demo@hayguard.com'&&password==='demo123'){const demoUser={id:1,name:'John Farmer',email:'demo@hayguard.com',phone:'+1 (555) 123-4567',role:'Farm Owner',location:'Springfield, IL',bio:'Experienced farmer focused on sustainable agriculture',profilePicture:'/default-avatar.png'};setUser(demoUser);localStorage.setItem('token','demo-token');return{success:true};}else{return{success:false,error:'Invalid credentials. Use demo@hayguard.com / demo123'};}}catch(error){var _error$response,_error$response$data;return{success:false,error:((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Login failed'};}};const handleLogout=()=>{setUser(null);localStorage.removeItem('token');};const handleUpdateUser=updatedUserData=>{setUser(prev=>_objectSpread(_objectSpread({},prev),updatedUserData));};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"app-loading\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"loading-spinner\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"hayguard-logo\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/logo.png\",alt:\"HayGuard\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"loading-text\",children:\"Loading HayGuard...\"})]})});}if(!user){return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsx(\"div\",{className:\"app\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{onLogin:handleLogin})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true})})]})})});}return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsx(Sidebar,{collapsed:sidebarCollapsed,onToggle:()=>setSidebarCollapsed(!sidebarCollapsed),user:user}),/*#__PURE__*/_jsxs(\"div\",{className:\"main-content \".concat(sidebarCollapsed?'sidebar-collapsed':''),children:[/*#__PURE__*/_jsx(Header,{user:user,onLogout:handleLogout,onToggleSidebar:()=>setSidebarCollapsed(!sidebarCollapsed)}),/*#__PURE__*/_jsx(\"main\",{className:\"app-main\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"/dashboard\",element:/*#__PURE__*/_jsx(Dashboard,{user:user})}),/*#__PURE__*/_jsx(Route,{path:\"/profile\",element:/*#__PURE__*/_jsx(Profile,{user:user,onUpdateUser:handleUpdateUser})}),/*#__PURE__*/_jsx(Route,{path:\"/farm-info\",element:/*#__PURE__*/_jsx(MyFarm,{})}),/*#__PURE__*/_jsx(Route,{path:\"/sensors\",element:/*#__PURE__*/_jsx(SensorManagement,{})}),/*#__PURE__*/_jsx(Route,{path:\"/farms\",element:/*#__PURE__*/_jsx(Farms,{})}),/*#__PURE__*/_jsx(Route,{path:\"/farms/:id\",element:/*#__PURE__*/_jsx(FarmDetails,{})}),/*#__PURE__*/_jsx(Route,{path:\"/reports\",element:/*#__PURE__*/_jsx(Reports,{})}),/*#__PURE__*/_jsx(Route,{path:\"/team\",element:/*#__PURE__*/_jsx(Team,{})}),/*#__PURE__*/_jsx(Route,{path:\"/alerts\",element:/*#__PURE__*/_jsx(Alerts,{})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\",replace:true})})]})})]})]})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Routes","Route","Navigate","Sidebar","Header","Dashboard","MyFarm","SensorManagement","Farms","FarmDetails","Reports","Team","Alerts","Login","Profile","authService","userService","jsx","_jsx","jsxs","_jsxs","App","user","setUser","loading","setLoading","sidebarCollapsed","setSidebarCollapsed","initializeAuth","token","localStorage","getItem","userData","getCurrentUser","error","console","removeItem","handleLogin","email","password","demoUser","id","name","phone","role","location","bio","profilePicture","setItem","success","_error$response","_error$response$data","response","data","message","handleLogout","handleUpdateUser","updatedUserData","prev","_objectSpread","className","children","src","alt","path","element","onLogin","to","replace","collapsed","onToggle","concat","onLogout","onToggleSidebar","onUpdateUser"],"sources":["/Users/francescoterragni/Desktop/hayguard/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\nimport './App.css';\n\n// Components\nimport Sidebar from './components/Sidebar';\nimport Header from './components/Header';\nimport Dashboard from './components/Dashboard';\nimport MyFarm from './components/Farm/MyFarm';\nimport SensorManagement from './components/Sensors/SensorManagement';\nimport Farms from './components/Farms/Farms';\nimport FarmDetails from './components/Farms/FarmDetails';\nimport Reports from './components/Reports/Reports';\nimport Team from './components/Team/Team';\nimport Alerts from './components/Alerts/Alerts';\nimport Login from './components/Auth/Login';\nimport Profile from './components/Profile/Profile';\n\n// Services\nimport { authService } from './services/authService';\nimport { userService } from './services/userService';\n\nfunction App() {\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\n\n  useEffect(() => {\n    const initializeAuth = async () => {\n      try {\n        const token = localStorage.getItem('token');\n        if (token) {\n          const userData = await userService.getCurrentUser();\n          setUser(userData);\n        }\n      } catch (error) {\n        console.error('Auth initialization failed:', error);\n        localStorage.removeItem('token');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    initializeAuth();\n  }, []);\n\n  const handleLogin = async (email, password) => {\n    try {\n      if (email === 'demo@hayguard.com' && password === 'demo123') {\n        const demoUser = {\n          id: 1,\n          name: 'John Farmer',\n          email: 'demo@hayguard.com',\n          phone: '+1 (555) 123-4567',\n          role: 'Farm Owner',\n          location: 'Springfield, IL',\n          bio: 'Experienced farmer focused on sustainable agriculture',\n          profilePicture: '/default-avatar.png'\n        };\n        setUser(demoUser);\n        localStorage.setItem('token', 'demo-token');\n        return { success: true };\n      } else {\n        return { \n          success: false, \n          error: 'Invalid credentials. Use demo@hayguard.com / demo123' \n        };\n      }\n    } catch (error) {\n      return { \n        success: false, \n        error: error.response?.data?.message || 'Login failed' \n      };\n    }\n  };\n\n  const handleLogout = () => {\n    setUser(null);\n    localStorage.removeItem('token');\n  };\n\n  const handleUpdateUser = (updatedUserData) => {\n    setUser(prev => ({ ...prev, ...updatedUserData }));\n  };\n\n  if (loading) {\n    return (\n      <div className=\"app-loading\">\n        <div className=\"loading-spinner\">\n          <div className=\"hayguard-logo\">\n            <img src=\"/logo.png\" alt=\"HayGuard\" />\n          </div>\n          <div className=\"loading-text\">Loading HayGuard...</div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!user) {\n    return (\n      <Router>\n        <div className=\"app\">\n          <Routes>\n            <Route path=\"/login\" element={<Login onLogin={handleLogin} />} />\n            <Route path=\"*\" element={<Navigate to=\"/login\" replace />} />\n          </Routes>\n        </div>\n      </Router>\n    );\n  }\n\n  return (\n    <Router>\n      <div className=\"app\">\n        <Sidebar \n          collapsed={sidebarCollapsed}\n          onToggle={() => setSidebarCollapsed(!sidebarCollapsed)}\n          user={user}\n        />\n        \n        <div className={`main-content ${sidebarCollapsed ? 'sidebar-collapsed' : ''}`}>\n          <Header \n            user={user}\n            onLogout={handleLogout}\n            onToggleSidebar={() => setSidebarCollapsed(!sidebarCollapsed)}\n          />\n          \n          <main className=\"app-main\">\n            <Routes>\n              <Route path=\"/\" element={<Navigate to=\"/dashboard\" replace />} />\n              <Route path=\"/dashboard\" element={<Dashboard user={user} />} />\n              <Route path=\"/profile\" element={<Profile user={user} onUpdateUser={handleUpdateUser} />} />\n              <Route path=\"/farm-info\" element={<MyFarm />} />\n              <Route path=\"/sensors\" element={<SensorManagement />} />\n              <Route path=\"/farms\" element={<Farms />} />\n              <Route path=\"/farms/:id\" element={<FarmDetails />} />\n              <Route path=\"/reports\" element={<Reports />} />\n              <Route path=\"/team\" element={<Team />} />\n              <Route path=\"/alerts\" element={<Alerts />} />\n              <Route path=\"*\" element={<Navigate to=\"/dashboard\" replace />} />\n            </Routes>\n          </main>\n        </div>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n"],"mappings":"uIAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,aAAa,GAAI,CAAAC,MAAM,CAAEC,MAAM,CAAEC,KAAK,CAAEC,QAAQ,KAAQ,kBAAkB,CACnF,MAAO,WAAW,CAElB;AACA,MAAO,CAAAC,OAAO,KAAM,sBAAsB,CAC1C,MAAO,CAAAC,MAAM,KAAM,qBAAqB,CACxC,MAAO,CAAAC,SAAS,KAAM,wBAAwB,CAC9C,MAAO,CAAAC,MAAM,KAAM,0BAA0B,CAC7C,MAAO,CAAAC,gBAAgB,KAAM,uCAAuC,CACpE,MAAO,CAAAC,KAAK,KAAM,0BAA0B,CAC5C,MAAO,CAAAC,WAAW,KAAM,gCAAgC,CACxD,MAAO,CAAAC,OAAO,KAAM,8BAA8B,CAClD,MAAO,CAAAC,IAAI,KAAM,wBAAwB,CACzC,MAAO,CAAAC,MAAM,KAAM,4BAA4B,CAC/C,MAAO,CAAAC,KAAK,KAAM,yBAAyB,CAC3C,MAAO,CAAAC,OAAO,KAAM,8BAA8B,CAElD;AACA,OAASC,WAAW,KAAQ,wBAAwB,CACpD,OAASC,WAAW,KAAQ,wBAAwB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAErD,QAAS,CAAAC,GAAGA,CAAA,CAAG,CACb,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAG3B,QAAQ,CAAC,IAAI,CAAC,CACtC,KAAM,CAAC4B,OAAO,CAAEC,UAAU,CAAC,CAAG7B,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAAC8B,gBAAgB,CAAEC,mBAAmB,CAAC,CAAG/B,QAAQ,CAAC,KAAK,CAAC,CAE/DC,SAAS,CAAC,IAAM,CACd,KAAM,CAAA+B,cAAc,CAAG,KAAAA,CAAA,GAAY,CACjC,GAAI,CACF,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAIF,KAAK,CAAE,CACT,KAAM,CAAAG,QAAQ,CAAG,KAAM,CAAAhB,WAAW,CAACiB,cAAc,CAAC,CAAC,CACnDV,OAAO,CAACS,QAAQ,CAAC,CACnB,CACF,CAAE,MAAOE,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,6BAA6B,CAAEA,KAAK,CAAC,CACnDJ,YAAY,CAACM,UAAU,CAAC,OAAO,CAAC,CAClC,CAAC,OAAS,CACRX,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAEDG,cAAc,CAAC,CAAC,CAClB,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAS,WAAW,CAAG,KAAAA,CAAOC,KAAK,CAAEC,QAAQ,GAAK,CAC7C,GAAI,CACF,GAAID,KAAK,GAAK,mBAAmB,EAAIC,QAAQ,GAAK,SAAS,CAAE,CAC3D,KAAM,CAAAC,QAAQ,CAAG,CACfC,EAAE,CAAE,CAAC,CACLC,IAAI,CAAE,aAAa,CACnBJ,KAAK,CAAE,mBAAmB,CAC1BK,KAAK,CAAE,mBAAmB,CAC1BC,IAAI,CAAE,YAAY,CAClBC,QAAQ,CAAE,iBAAiB,CAC3BC,GAAG,CAAE,uDAAuD,CAC5DC,cAAc,CAAE,qBAClB,CAAC,CACDxB,OAAO,CAACiB,QAAQ,CAAC,CACjBV,YAAY,CAACkB,OAAO,CAAC,OAAO,CAAE,YAAY,CAAC,CAC3C,MAAO,CAAEC,OAAO,CAAE,IAAK,CAAC,CAC1B,CAAC,IAAM,CACL,MAAO,CACLA,OAAO,CAAE,KAAK,CACdf,KAAK,CAAE,sDACT,CAAC,CACH,CACF,CAAE,MAAOA,KAAK,CAAE,KAAAgB,eAAA,CAAAC,oBAAA,CACd,MAAO,CACLF,OAAO,CAAE,KAAK,CACdf,KAAK,CAAE,EAAAgB,eAAA,CAAAhB,KAAK,CAACkB,QAAQ,UAAAF,eAAA,kBAAAC,oBAAA,CAAdD,eAAA,CAAgBG,IAAI,UAAAF,oBAAA,iBAApBA,oBAAA,CAAsBG,OAAO,GAAI,cAC1C,CAAC,CACH,CACF,CAAC,CAED,KAAM,CAAAC,YAAY,CAAGA,CAAA,GAAM,CACzBhC,OAAO,CAAC,IAAI,CAAC,CACbO,YAAY,CAACM,UAAU,CAAC,OAAO,CAAC,CAClC,CAAC,CAED,KAAM,CAAAoB,gBAAgB,CAAIC,eAAe,EAAK,CAC5ClC,OAAO,CAACmC,IAAI,EAAAC,aAAA,CAAAA,aAAA,IAAUD,IAAI,EAAKD,eAAe,CAAG,CAAC,CACpD,CAAC,CAED,GAAIjC,OAAO,CAAE,CACX,mBACEN,IAAA,QAAK0C,SAAS,CAAC,aAAa,CAAAC,QAAA,cAC1BzC,KAAA,QAAKwC,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC9B3C,IAAA,QAAK0C,SAAS,CAAC,eAAe,CAAAC,QAAA,cAC5B3C,IAAA,QAAK4C,GAAG,CAAC,WAAW,CAACC,GAAG,CAAC,UAAU,CAAE,CAAC,CACnC,CAAC,cACN7C,IAAA,QAAK0C,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAC,qBAAmB,CAAK,CAAC,EACpD,CAAC,CACH,CAAC,CAEV,CAEA,GAAI,CAACvC,IAAI,CAAE,CACT,mBACEJ,IAAA,CAACnB,MAAM,EAAA8D,QAAA,cACL3C,IAAA,QAAK0C,SAAS,CAAC,KAAK,CAAAC,QAAA,cAClBzC,KAAA,CAACpB,MAAM,EAAA6D,QAAA,eACL3C,IAAA,CAACjB,KAAK,EAAC+D,IAAI,CAAC,QAAQ,CAACC,OAAO,cAAE/C,IAAA,CAACL,KAAK,EAACqD,OAAO,CAAE7B,WAAY,CAAE,CAAE,CAAE,CAAC,cACjEnB,IAAA,CAACjB,KAAK,EAAC+D,IAAI,CAAC,GAAG,CAACC,OAAO,cAAE/C,IAAA,CAAChB,QAAQ,EAACiE,EAAE,CAAC,QAAQ,CAACC,OAAO,MAAE,CAAE,CAAE,CAAC,EACvD,CAAC,CACN,CAAC,CACA,CAAC,CAEb,CAEA,mBACElD,IAAA,CAACnB,MAAM,EAAA8D,QAAA,cACLzC,KAAA,QAAKwC,SAAS,CAAC,KAAK,CAAAC,QAAA,eAClB3C,IAAA,CAACf,OAAO,EACNkE,SAAS,CAAE3C,gBAAiB,CAC5B4C,QAAQ,CAAEA,CAAA,GAAM3C,mBAAmB,CAAC,CAACD,gBAAgB,CAAE,CACvDJ,IAAI,CAAEA,IAAK,CACZ,CAAC,cAEFF,KAAA,QAAKwC,SAAS,iBAAAW,MAAA,CAAkB7C,gBAAgB,CAAG,mBAAmB,CAAG,EAAE,CAAG,CAAAmC,QAAA,eAC5E3C,IAAA,CAACd,MAAM,EACLkB,IAAI,CAAEA,IAAK,CACXkD,QAAQ,CAAEjB,YAAa,CACvBkB,eAAe,CAAEA,CAAA,GAAM9C,mBAAmB,CAAC,CAACD,gBAAgB,CAAE,CAC/D,CAAC,cAEFR,IAAA,SAAM0C,SAAS,CAAC,UAAU,CAAAC,QAAA,cACxBzC,KAAA,CAACpB,MAAM,EAAA6D,QAAA,eACL3C,IAAA,CAACjB,KAAK,EAAC+D,IAAI,CAAC,GAAG,CAACC,OAAO,cAAE/C,IAAA,CAAChB,QAAQ,EAACiE,EAAE,CAAC,YAAY,CAACC,OAAO,MAAE,CAAE,CAAE,CAAC,cACjElD,IAAA,CAACjB,KAAK,EAAC+D,IAAI,CAAC,YAAY,CAACC,OAAO,cAAE/C,IAAA,CAACb,SAAS,EAACiB,IAAI,CAAEA,IAAK,CAAE,CAAE,CAAE,CAAC,cAC/DJ,IAAA,CAACjB,KAAK,EAAC+D,IAAI,CAAC,UAAU,CAACC,OAAO,cAAE/C,IAAA,CAACJ,OAAO,EAACQ,IAAI,CAAEA,IAAK,CAACoD,YAAY,CAAElB,gBAAiB,CAAE,CAAE,CAAE,CAAC,cAC3FtC,IAAA,CAACjB,KAAK,EAAC+D,IAAI,CAAC,YAAY,CAACC,OAAO,cAAE/C,IAAA,CAACZ,MAAM,GAAE,CAAE,CAAE,CAAC,cAChDY,IAAA,CAACjB,KAAK,EAAC+D,IAAI,CAAC,UAAU,CAACC,OAAO,cAAE/C,IAAA,CAACX,gBAAgB,GAAE,CAAE,CAAE,CAAC,cACxDW,IAAA,CAACjB,KAAK,EAAC+D,IAAI,CAAC,QAAQ,CAACC,OAAO,cAAE/C,IAAA,CAACV,KAAK,GAAE,CAAE,CAAE,CAAC,cAC3CU,IAAA,CAACjB,KAAK,EAAC+D,IAAI,CAAC,YAAY,CAACC,OAAO,cAAE/C,IAAA,CAACT,WAAW,GAAE,CAAE,CAAE,CAAC,cACrDS,IAAA,CAACjB,KAAK,EAAC+D,IAAI,CAAC,UAAU,CAACC,OAAO,cAAE/C,IAAA,CAACR,OAAO,GAAE,CAAE,CAAE,CAAC,cAC/CQ,IAAA,CAACjB,KAAK,EAAC+D,IAAI,CAAC,OAAO,CAACC,OAAO,cAAE/C,IAAA,CAACP,IAAI,GAAE,CAAE,CAAE,CAAC,cACzCO,IAAA,CAACjB,KAAK,EAAC+D,IAAI,CAAC,SAAS,CAACC,OAAO,cAAE/C,IAAA,CAACN,MAAM,GAAE,CAAE,CAAE,CAAC,cAC7CM,IAAA,CAACjB,KAAK,EAAC+D,IAAI,CAAC,GAAG,CAACC,OAAO,cAAE/C,IAAA,CAAChB,QAAQ,EAACiE,EAAE,CAAC,YAAY,CAACC,OAAO,MAAE,CAAE,CAAE,CAAC,EAC3D,CAAC,CACL,CAAC,EACJ,CAAC,EACH,CAAC,CACA,CAAC,CAEb,CAEA,cAAe,CAAA/C,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}