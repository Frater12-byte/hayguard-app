{"ast":null,"code":"import React,{useState,useEffect}from'react';import{BrowserRouter as Router,Routes,Route,Navigate}from'react-router-dom';import'./App.css';// Components\nimport Sidebar from'./components/Sidebar';import Header from'./components/Header';import Dashboard from'./components/Dashboard';import Farms from'./components/Farms/Farms';import FarmDetails from'./components/Farms/FarmDetails';import Analytics from'./components/Analytics/Analytics';import Reports from'./components/Reports/Reports';import Team from'./components/Team/Team';import Weather from'./components/Weather/Weather';import Alerts from'./components/Alerts/Alerts';import Settings from'./components/Settings/Settings';import Login from'./components/Auth/Login';// Services\nimport{authService}from'./services/authService';import{userService}from'./services/userService';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);const[sidebarCollapsed,setSidebarCollapsed]=useState(false);useEffect(()=>{// Check if user is logged in on app start\nconst initializeAuth=async()=>{try{const token=localStorage.getItem('token');if(token){const userData=await userService.getCurrentUser();setUser(userData);}}catch(error){console.error('Auth initialization failed:',error);localStorage.removeItem('token');}finally{setLoading(false);}};initializeAuth();},[]);const handleLogin=async(email,password)=>{try{const response=await authService.login(email,password);setUser(response.user);localStorage.setItem('token',response.token);return{success:true};}catch(error){var _error$response,_error$response$data;return{success:false,error:((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Login failed'};}};const handleLogout=()=>{authService.logout();setUser(null);localStorage.removeItem('token');};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"app-loading\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"loading-spinner\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"hayguard-logo\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/logo.png\",alt:\"HayGuard\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"loading-text\",children:\"Loading HayGuard...\"})]})});}if(!user){return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsx(\"div\",{className:\"app\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{onLogin:handleLogin})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true})})]})})});}return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsx(Sidebar,{collapsed:sidebarCollapsed,onToggle:()=>setSidebarCollapsed(!sidebarCollapsed),user:user}),/*#__PURE__*/_jsxs(\"div\",{className:\"main-content \".concat(sidebarCollapsed?'sidebar-collapsed':''),children:[/*#__PURE__*/_jsx(Header,{user:user,onLogout:handleLogout,onToggleSidebar:()=>setSidebarCollapsed(!sidebarCollapsed)}),/*#__PURE__*/_jsx(\"main\",{className:\"app-main\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"/dashboard\",element:/*#__PURE__*/_jsx(Dashboard,{user:user})}),/*#__PURE__*/_jsx(Route,{path:\"/farms\",element:/*#__PURE__*/_jsx(Farms,{})}),/*#__PURE__*/_jsx(Route,{path:\"/farms/:id\",element:/*#__PURE__*/_jsx(FarmDetails,{})}),/*#__PURE__*/_jsx(Route,{path:\"/analytics\",element:/*#__PURE__*/_jsx(Analytics,{})}),/*#__PURE__*/_jsx(Route,{path:\"/reports\",element:/*#__PURE__*/_jsx(Reports,{})}),/*#__PURE__*/_jsx(Route,{path:\"/team\",element:/*#__PURE__*/_jsx(Team,{})}),/*#__PURE__*/_jsx(Route,{path:\"/weather\",element:/*#__PURE__*/_jsx(Weather,{})}),/*#__PURE__*/_jsx(Route,{path:\"/alerts\",element:/*#__PURE__*/_jsx(Alerts,{})}),/*#__PURE__*/_jsx(Route,{path:\"/settings\",element:/*#__PURE__*/_jsx(Settings,{user:user})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\",replace:true})})]})})]})]})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Routes","Route","Navigate","Sidebar","Header","Dashboard","Farms","FarmDetails","Analytics","Reports","Team","Weather","Alerts","Settings","Login","authService","userService","jsx","_jsx","jsxs","_jsxs","App","user","setUser","loading","setLoading","sidebarCollapsed","setSidebarCollapsed","initializeAuth","token","localStorage","getItem","userData","getCurrentUser","error","console","removeItem","handleLogin","email","password","response","login","setItem","success","_error$response","_error$response$data","data","message","handleLogout","logout","className","children","src","alt","path","element","onLogin","to","replace","collapsed","onToggle","concat","onLogout","onToggleSidebar"],"sources":["/Users/francescoterragni/Desktop/hayguard/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\nimport './App.css';\n\n// Components\nimport Sidebar from './components/Sidebar';\nimport Header from './components/Header';\nimport Dashboard from './components/Dashboard';\nimport Farms from './components/Farms/Farms';\nimport FarmDetails from './components/Farms/FarmDetails';\nimport Analytics from './components/Analytics/Analytics';\nimport Reports from './components/Reports/Reports';\nimport Team from './components/Team/Team';\nimport Weather from './components/Weather/Weather';\nimport Alerts from './components/Alerts/Alerts';\nimport Settings from './components/Settings/Settings';\nimport Login from './components/Auth/Login';\n\n// Services\nimport { authService } from './services/authService';\nimport { userService } from './services/userService';\n\nfunction App() {\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\n\n  useEffect(() => {\n    // Check if user is logged in on app start\n    const initializeAuth = async () => {\n      try {\n        const token = localStorage.getItem('token');\n        if (token) {\n          const userData = await userService.getCurrentUser();\n          setUser(userData);\n        }\n      } catch (error) {\n        console.error('Auth initialization failed:', error);\n        localStorage.removeItem('token');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    initializeAuth();\n  }, []);\n\n  const handleLogin = async (email, password) => {\n    try {\n      const response = await authService.login(email, password);\n      setUser(response.user);\n      localStorage.setItem('token', response.token);\n      return { success: true };\n    } catch (error) {\n      return { \n        success: false, \n        error: error.response?.data?.message || 'Login failed' \n      };\n    }\n  };\n\n  const handleLogout = () => {\n    authService.logout();\n    setUser(null);\n    localStorage.removeItem('token');\n  };\n\n  if (loading) {\n    return (\n      <div className=\"app-loading\">\n        <div className=\"loading-spinner\">\n          <div className=\"hayguard-logo\">\n            <img src=\"/logo.png\" alt=\"HayGuard\" />\n          </div>\n          <div className=\"loading-text\">Loading HayGuard...</div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!user) {\n    return (\n      <Router>\n        <div className=\"app\">\n          <Routes>\n            <Route path=\"/login\" element={<Login onLogin={handleLogin} />} />\n            <Route path=\"*\" element={<Navigate to=\"/login\" replace />} />\n          </Routes>\n        </div>\n      </Router>\n    );\n  }\n\n  return (\n    <Router>\n      <div className=\"app\">\n        <Sidebar \n          collapsed={sidebarCollapsed}\n          onToggle={() => setSidebarCollapsed(!sidebarCollapsed)}\n          user={user}\n        />\n        \n        <div className={`main-content ${sidebarCollapsed ? 'sidebar-collapsed' : ''}`}>\n          <Header \n            user={user}\n            onLogout={handleLogout}\n            onToggleSidebar={() => setSidebarCollapsed(!sidebarCollapsed)}\n          />\n          \n          <main className=\"app-main\">\n            <Routes>\n              <Route path=\"/\" element={<Navigate to=\"/dashboard\" replace />} />\n              <Route path=\"/dashboard\" element={<Dashboard user={user} />} />\n              \n              <Route path=\"/farms\" element={<Farms />} />\n              <Route path=\"/farms/:id\" element={<FarmDetails />} />\n              \n              <Route path=\"/analytics\" element={<Analytics />} />\n              <Route path=\"/reports\" element={<Reports />} />\n              <Route path=\"/team\" element={<Team />} />\n              <Route path=\"/weather\" element={<Weather />} />\n              <Route path=\"/alerts\" element={<Alerts />} />\n              <Route path=\"/settings\" element={<Settings user={user} />} />\n              \n              <Route path=\"*\" element={<Navigate to=\"/dashboard\" replace />} />\n            </Routes>\n          </main>\n        </div>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}