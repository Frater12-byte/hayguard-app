{"ast":null,"code":"import _objectSpread from\"/Users/francescoterragni/Desktop/hayguard/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";const API_BASE_URL=process.env.REACT_APP_API_URL||'http://localhost:3001/api';class ApiService{constructor(){this.baseURL=API_BASE_URL;}getToken(){return localStorage.getItem('token');}getHeaders(){const token=this.getToken();return _objectSpread({'Content-Type':'application/json'},token&&{'Authorization':\"Bearer \".concat(token)});}async request(endpoint){let options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};const url=\"\".concat(this.baseURL).concat(endpoint);const config=_objectSpread({headers:this.getHeaders()},options);try{const response=await fetch(url,config);if(!response.ok){const error=await response.json();throw new Error(error.error||\"HTTP \".concat(response.status));}return await response.json();}catch(error){console.error('API Request failed:',error);throw error;}}async login(email,password){return this.request('/auth/login',{method:'POST',body:JSON.stringify({email,password})});}async getFarm(farmId){return this.request(\"/farms/\".concat(farmId));}async updateFarm(farmId,farmData){return this.request(\"/farms/\".concat(farmId),{method:'PUT',body:JSON.stringify(farmData)});}async getSensors(){return this.request('/sensors');}async createSensor(sensorData){return this.request('/sensors',{method:'POST',body:JSON.stringify(sensorData)});}async getSensorData(sensorId,startDate,endDate){const params=new URLSearchParams();if(startDate)params.append('startDate',startDate);if(endDate)params.append('endDate',endDate);return this.request(\"/sensors/\".concat(sensorId,\"/data?\").concat(params));}async getAlerts(startDate,endDate,type){const params=new URLSearchParams();if(startDate)params.append('startDate',startDate);if(endDate)params.append('endDate',endDate);if(type)params.append('type',type);return this.request(\"/alerts?\".concat(params));}async getDashboardStats(){return this.request('/dashboard/stats');}async sendInvitation(email,role){return this.request('/email/invite',{method:'POST',body:JSON.stringify({email,role})});}async resetPassword(email){return this.request('/email/reset-password',{method:'POST',body:JSON.stringify({email})});}}export const apiService=new ApiService();","map":{"version":3,"names":["API_BASE_URL","process","env","REACT_APP_API_URL","ApiService","constructor","baseURL","getToken","localStorage","getItem","getHeaders","token","_objectSpread","concat","request","endpoint","options","arguments","length","undefined","url","config","headers","response","fetch","ok","error","json","Error","status","console","login","email","password","method","body","JSON","stringify","getFarm","farmId","updateFarm","farmData","getSensors","createSensor","sensorData","getSensorData","sensorId","startDate","endDate","params","URLSearchParams","append","getAlerts","type","getDashboardStats","sendInvitation","role","resetPassword","apiService"],"sources":["/Users/francescoterragni/Desktop/hayguard/frontend/src/services/apiService.js"],"sourcesContent":["const API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:3001/api';\n\nclass ApiService {\n  constructor() {\n    this.baseURL = API_BASE_URL;\n  }\n\n  getToken() {\n    return localStorage.getItem('token');\n  }\n\n  getHeaders() {\n    const token = this.getToken();\n    return {\n      'Content-Type': 'application/json',\n      ...(token && { 'Authorization': `Bearer ${token}` })\n    };\n  }\n\n  async request(endpoint, options = {}) {\n    const url = `${this.baseURL}${endpoint}`;\n    const config = {\n      headers: this.getHeaders(),\n      ...options\n    };\n\n    try {\n      const response = await fetch(url, config);\n      \n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.error || `HTTP ${response.status}`);\n      }\n\n      return await response.json();\n    } catch (error) {\n      console.error('API Request failed:', error);\n      throw error;\n    }\n  }\n\n  async login(email, password) {\n    return this.request('/auth/login', {\n      method: 'POST',\n      body: JSON.stringify({ email, password })\n    });\n  }\n\n  async getFarm(farmId) {\n    return this.request(`/farms/${farmId}`);\n  }\n\n  async updateFarm(farmId, farmData) {\n    return this.request(`/farms/${farmId}`, {\n      method: 'PUT',\n      body: JSON.stringify(farmData)\n    });\n  }\n\n  async getSensors() {\n    return this.request('/sensors');\n  }\n\n  async createSensor(sensorData) {\n    return this.request('/sensors', {\n      method: 'POST',\n      body: JSON.stringify(sensorData)\n    });\n  }\n\n  async getSensorData(sensorId, startDate, endDate) {\n    const params = new URLSearchParams();\n    if (startDate) params.append('startDate', startDate);\n    if (endDate) params.append('endDate', endDate);\n    \n    return this.request(`/sensors/${sensorId}/data?${params}`);\n  }\n\n  async getAlerts(startDate, endDate, type) {\n    const params = new URLSearchParams();\n    if (startDate) params.append('startDate', startDate);\n    if (endDate) params.append('endDate', endDate);\n    if (type) params.append('type', type);\n    \n    return this.request(`/alerts?${params}`);\n  }\n\n  async getDashboardStats() {\n    return this.request('/dashboard/stats');\n  }\n\n  async sendInvitation(email, role) {\n    return this.request('/email/invite', {\n      method: 'POST',\n      body: JSON.stringify({ email, role })\n    });\n  }\n\n  async resetPassword(email) {\n    return this.request('/email/reset-password', {\n      method: 'POST',\n      body: JSON.stringify({ email })\n    });\n  }\n}\n\nexport const apiService = new ApiService();\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}